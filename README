.. image:: https://secure.travis-ci.org/GeoNode/geonode.png
    :alt: Build Status
    :target: http://travis-ci.org/GeoNode/geonode

=========
 Worldmap - based on GeoNode
=========

WorldMap is a forked version of GeoNode that has been heavily customized for use at Harvard's Center for Geographic
Analysis. If you just want to try GeoNode, it is recommended to use Ubuntu 12.04 and install the latest stable release::

    sudo add-apt-repository ppa:geonode/release
    sudo apt-get update
    sudo apt-get install geonode

If instead, you are interested in doing development on the WorldMap source code, here are the instructions for Ubuntu 12.04::

    # retrieve latest apt-get list
    sudo apt-get update

    # Essential build tools and libraries
    sudo apt-get install -y build-essential libxml2-dev libxslt1-dev libjpeg-dev

    # Python native dependencies
    sudo apt-get install -y python-dev python-imaging python-lxml python-pyproj python-shapely python-nose python-httplib2 python-pip python-software-properties

    # Setup virtualenv tools
    sudo pip install virtualenvwrapper

    # Java dependencies
    sudo apt-get install -y --force-yes openjdk-6-jdk ant maven2 --no-install-recommends

    # Supporting tools
    sudo apt-get install -y  git gettext

    # Node and tools required for static development
    sudo add-apt-repository -y ppa:chris-lea/node.js
    sudo apt-get update
    sudo apt-get install -y nodejs
    sudo npm install -y -g bower
    sudo npm install -y -g grunt-cli

    # Add virtualenvwrapper to your environment
    export VIRTUALENVWRAPPER_PYTHON=/usr/bin/python
    export WORKON_HOME=~/.venvs
    source /usr/local/bin/virtualenvwrapper.sh
    export PIP_DOWNLOAD_CACHE=$HOME/.pip-downloads

    # Setup a virtualenv for geonode
    mkvirtualenv geonode
    workon geonode

    # Clone WorldMap
    git clone https://github.com/cga-harvard/cga-worldmap.git

    # Install GeoNode in the local virtualenv
    # In pip 1.5 pyproj needs to be whitelisted
    pip install -e cga-worldmap --use-mirrors --allow-external pyproj --allow-unverified pyproj
    pip install -r cga-worldmap/requirements.txt
    cd cga-worldmap

    # Compile GeoServer
    paver setup

    # Start the development servers
    paver start

    # Visit the development geonode site
    http://localhost:8000


WorldMap is only known to run on Ubuntu Linux. While it may be possible to run WorldMap on other flavors of Linux,
Mac OSX, or Windows, no technical support can be provided for those operating systems.  Try using GeoNode instead if
you need to use another OS besides Linux.


The default username and password are ``admin`` and ``admin``::
  
  Development GeoNode is running at http://localhost:8000/
  The GeoNode is an unstoppable machine
  Press CTRL-C to shut down

Before starting WorldMap (paver start), you could test your installation by running tests::

    paver test
    paver test_integration
    
In case you want to build yourself the documentation, you need to install Sphinx and the run 'make html' from within the docs directory::

    pip install Sphinx
    cd docs
    make html
    
You can eventually generate a pdf containing the whole documentation set. For this purpose, if using Ubuntu 12.4 you will need to install the texlive-full package::

    sudo apt-get install texlive-full
    make latexpdf

.. note:: 

  When running ``virtualenv venv`` the ``--system-site-packages`` option is
  not required.  If not enabled, the bootstrap script will sandbox your virtual
  environment from any packages that are installed in the system, useful if
  you have incompatible versions of libraries such as Django installed
  system-wide.  On the other hand, most of the times it is useful to use a version of
  the Python Imaging Library provided by your operating system
  vendor, or packaged other than on PyPI.  When in doubt, however, just leave
  this option out.


WorldMap Javascript Client for Map Composer
===========================================
WorldMap uses a custom map composer.  If you wish to modify and/or debug the Composer, you will need the
(OpenGeoSuite 4.0 SDK)[http://suite.opengeo.org/opengeo-docs/webapps/webappsdk.html] and the (Worldmap client
source code)[https://github.com/mbertrand/geonode-suite-sdk.git].  Place both in the directory immediately above
your worldmap git repository.  Then run one of the following commands to debug or build the client:

  ant -f ../opengeosuite-4.0-sdk/build.xml -Dapp.path=../geonode-suite-sdk -Dsdk.build=../gn20upgrade/geonode/static -Dapp.name=sdk debug
  ant -f ../opengeosuite-4.0-sdk/build.xml -Dapp.path=../geonode-suite-sdk -Dsdk.build=../gn20upgrade/geonode/static -Dapp.name=sdk build




GPL License
===========

GeoNode is Copyright 2010 OpenPlans.
WorldMap is Copyright 2010 Harvard University.

WorldMap is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

WorldMap is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with WorldMap.  If not, see <http://www.gnu.org/licenses/>.
